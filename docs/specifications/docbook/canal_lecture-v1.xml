<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//UR1//DTD docGeneric//FR"
"http://outils.univ-rennes1.fr/xxe/dtd/docGeneric.dtd">
<article lang="FR">
  <title>Projet CANAL LECTURE Spécifications détaillées version 1.00</title>

  <subtitle>Canal lecture : affichage des annonces</subtitle>

  <articleinfo>
    <copyright>
      <year>11 avril 2006</year>

      <holder>Gwénaelle Bouteille</holder>
    </copyright>

    <releaseinfo>
      <remark><productname></productname>&#160;-&#160;<productnumber></productnumber></remark>
    </releaseinfo>

    <abstract>
      <para>Description des étapes pour le projet Canal Lecture version 1.00
      des "spécifications détaillées"</para>
    </abstract>
  </articleinfo>

  <formalpara>
    <title>Introduction</title>

    <para>Voici les cas d'utilisations retenus pour la version 1.00
    :<itemizedlist>
        <listitem>
          <para>niveau source :<itemizedlist>
              <listitem>
                <para>abonner_source (mode edit) : à faire</para>
              </listitem>

              <listitem>
                <para>desabonner_source (mode edit) : à faire</para>
              </listitem>

              <listitem>
                <para>modifier_vue_source (mode view)<itemizedlist>
                    <listitem>
                      <para>marquer_item_lu/non_lu</para>
                    </listitem>

                    <listitem>
                      <para>choisir_mode_visu_source</para>
                    </listitem>

                    <listitem>
                      <para>zoomer/dezoomer_source</para>
                    </listitem>
                  </itemizedlist></para>
              </listitem>
            </itemizedlist></para>
        </listitem>

        <listitem>
          <para>niveau catégorie :</para>

          <para><itemizedlist>
              <listitem>
                <para>deplacer_source (mode edit) : à faire plus tard</para>
              </listitem>

              <listitem>
                <para>modifier_vue_categorie (mode view)<itemizedlist>
                    <listitem>
                      <para>deplier_categorie</para>
                    </listitem>

                    <listitem>
                      <para>replier_categorie</para>
                    </listitem>

                    <listitem>
                      <para>selectionner_source</para>
                    </listitem>
                  </itemizedlist></para>
              </listitem>
            </itemizedlist></para>
        </listitem>

        <listitem>
          <para>niveau contexte :<itemizedlist>
              <listitem>
                <para>afficher_contexte (mode view : via le portail)</para>
              </listitem>

              <listitem>
                <para>deplacer_categorie (mode edit) : à faire plus
                tard</para>
              </listitem>

              <listitem>
                <para>modifier_vue_contexte :(mode view)<itemizedlist>
                    <listitem>
                      <para>dimensionner_arbre</para>
                    </listitem>

                    <listitem>
                      <para>selectionner_categorie</para>
                    </listitem>
                  </itemizedlist></para>
              </listitem>
            </itemizedlist></para>
        </listitem>

        <listitem>
          <para>niveau global :<itemizedlist>
              <listitem>
                <para>rafraichir_config_canal (non IHM)</para>
              </listitem>

              <listitem>
                <para>selectionner_contexte (mode view)</para>
              </listitem>

              <listitem>
                <para>afficher_aide (icone "Aide du canal") : à faire plus
                tard</para>
              </listitem>
            </itemizedlist></para>
        </listitem>
      </itemizedlist></para>
  </formalpara>

  <caution>
    <para>L'analyse pour la version 1.00 s'appuie sur l'analyse globale. Les
    modifications apportées ne seront pas répercutées dans l'analyse global
    que l'on considère comme terminée.</para>
  </caution>

  <section>
    <title>Spécifications détaillées</title>

    <para></para>

    <section>
      <title>Diagrammes UML</title>

      <para><itemizedlist>
          <listitem>
            <para>Diagrammes de classe : Il faut se référer aux diagrammes UML
            de conception/développement, présents dans le répertoire
            docs/uml/classes du projet. </para>
          </listitem>

          <listitem>
            <para>Diagrammes d'activités (traitements nominaux et alternatifs,
            traitement d'exception, logs) : ils décrivent les cas
            d'utilisation indiqués. Ils sont accessibles depuis le fichier
            index.html dans les répertoires suivants (dans
            <emphasis>docs/specifications/diag-activites</emphasis>)
            :<itemizedlist>
                <listitem>
                  <para><emphasis>act-rafraichir_config_canal-v1</emphasis>:
                  charger_tous_contextes, charger_tous_profils_categories,
                  forcer_timer_categorie</para>
                </listitem>

                <listitem>
                  <para><emphasis>act-rafraichir_categorie_controlee-v1</emphasis>:
                  rafraichir_categorie_controlée, enregistrer_source,
                  recuperer_pt_cas, effacer_source,
                  forcer_time_source_globale,
                  forcer_time_source_individuelle</para>
                </listitem>

                <listitem>
                  <para><emphasis>act-afficher_contexte-v1</emphasis> :
                  afficher_contexte, enregistrer_categorie,
                  rafraichir_context, effacer_categorie,
                  forcer_timer_categorie, afficher_contexte_selectionné</para>
                </listitem>

                <listitem>
                  <para><emphasis>act-afficher_categorie-v1</emphasis> :
                  afficher_categorie, afficher_catégorie_sélectionnée,
                  afficher_catégorie_dépliée</para>
                </listitem>

                <listitem>
                  <para><emphasis>act-afficher_source-v1</emphasis> :
                  afficher_source, afficher_source_sélectionnée,
                  rafraichir_source, recherche_xslt_xpath</para>
                </listitem>

                <listitem>
                  <para><emphasis>act-divers_contexte-v1</emphasis> :
                  modifier_vue_contexte, selectionner_contexte,
                  dimensionner_arbre, editer_contexte, selectionner_categorie,
                  deplacer_categorie</para>
                </listitem>

                <listitem>
                  <para><emphasis>act-divers_categorie-v1</emphasis> :
                  abonner_source, modifier_vue_categorie, editer_categorie,
                  désabonner_source, plier/deplier_categorie, deplacer_source,
                  sélectionner_source</para>
                </listitem>

                <listitem>
                  <para><emphasis>act-divers_source-v1</emphasis> :
                  modifier_vue_source, choisir_mode_visu_source,
                  zoomer/dezoomer_source, marquer_item_lu/non_lu</para>
                </listitem>

                <listitem>
                  <para><emphasis>act-charger_element-v1</emphasis> :
                  charger_element, charger_source_individuelle,
                  charger_source_globale, charger_catégorie</para>
                </listitem>
              </itemizedlist></para>
          </listitem>
        </itemizedlist></para>
    </section>

    <section>
      <title>Description des interfaces graphiques, charte graphique</title>

      <para></para>

      <section>
        <title>Mode "view"</title>

        <para>Voici les maquettes d'écrans du mode "View"
        (docs/specifications/ecrans/Ecrans_mode-view.ppt) :</para>

        <para><mediaobject>
            <imageobject>
              <imagedata
              fileref="../ecrans/mode-view/view-contexte_num.gif"></imagedata>
            </imageobject>
          </mediaobject></para>

        <para>Description de l'écran (+ Références au diagramme de
        classe):<itemizedlist>
            <listitem>
              <para>1.1 : Nom du contexte, désigné par la config du portail.
              Règle de bon usage : utiliser le même nom que dans la config du
              canal Lecture</para>
            </listitem>

            <listitem>
              <para>1.2 : Nom du contexte, désigné par la config du canal
              Lecture.</para>
            </listitem>

            <listitem>
              <para>1.3 :</para>

              <para>Fenêtre gauche : contexte sélectionné =&gt; définit
              l'affichage de la fenêtre droite</para>

              <para>Fenêtre droite : Affichage de la description du
              contexte</para>
            </listitem>

            <listitem>
              <para>1.4 : Elargir la fenêtre gauche, qui contient
              l'arborescence des données, au dépend de celle de droite. Un
              clic agrandit la fenêtre d'un pas de 5%</para>
            </listitem>
          </itemizedlist></para>

        <para>Actions de l'écran :<itemizedlist>
            <listitem>
              <para>1.2 : selectionner_contexte</para>
            </listitem>

            <listitem>
              <para>1.4 : dimensionner_arbre</para>
            </listitem>
          </itemizedlist></para>

        <para><mediaobject>
            <imageobject>
              <imagedata
              fileref="../ecrans/mode-view/view-categorie_num.gif"></imagedata>
            </imageobject>
          </mediaobject></para>

        <para>Description de l'écran - références aux diagramme de classe
        :<itemizedlist>
            <listitem>
              <para>2.1 :</para>

              <para>Fenêtre gauche : catégorie sélectionnée =&gt; définit
              l'affichage de la fenêtre droite</para>

              <para>Fenêtre droite : Affichage de la description de la
              catégorie sélectionnée</para>
            </listitem>

            <listitem>
              <para>2.2 : Catégorie contenant des sources dont tous les items
              ont été marqués "lus" ("tout a été lu")</para>
            </listitem>

            <listitem>
              <para>2.3 : Catégorie contenant des sources avec des items
              marqués "non lus" ("tout n'a pas été lu")</para>
            </listitem>

            <listitem>
              <para>2.4 : catégorie pliée</para>
            </listitem>

            <listitem>
              <para>2.5 : Catégorie dépliée</para>
            </listitem>
          </itemizedlist></para>

        <para>Actions de l'écran :<itemizedlist>
            <listitem>
              <para>2.1 : selectionner_categorie</para>
            </listitem>

            <listitem>
              <para>2.4 : deplier_categorie</para>
            </listitem>

            <listitem>
              <para>2.5 : replier_categorie</para>
            </listitem>
          </itemizedlist></para>

        <para><mediaobject>
            <imageobject>
              <imagedata
              fileref="../ecrans/mode-view/view-source_num.gif"></imagedata>
            </imageobject>
          </mediaobject></para>

        <para>Données de l'écran ( + références aux diagramme de classe
        )<itemizedlist>
            <listitem>
              <para>3.1 :</para>

              <para>Fenêtre gauche : source sélectionnée =&gt; définit
              l'affichage de la fenêtre droite</para>

              <para>Fenêtre droite : Affichage de la source
              sélectionnée</para>
            </listitem>

            <listitem>
              <para>3.2 : Source dont tous les items ont été marqués "lus"
              ("tout a été lu")</para>
            </listitem>

            <listitem>
              <para>3.3 : Source contenant des items marqués "non lus" ("tout
              n'a pas été lu")</para>
            </listitem>

            <listitem>
              <para>3.4 : Menu déroulant permettant de choisir le mode
              d'affichage de la source : tous les items / les items non lus /
              les items non lus en premier</para>
            </listitem>

            <listitem>
              <para>3.5 : Titre de la source</para>
            </listitem>

            <listitem>
              <para>3.6 : Demander l'affichage de la source en plein écran
              (sans la fenêtre de gauche)</para>
            </listitem>

            <listitem>
              <para>4.3 Item marqué "lu"</para>
            </listitem>

            <listitem>
              <para>4.4 Item marqué "non lu"</para>
            </listitem>
          </itemizedlist></para>

        <para>L'affichage d'un nouvel item est automatiquement "non lu".
        Lorsque tous les items d'une source ont été marqué "lu", la source se
        met dans l'état "tout a été lu". Lorsque toutes les sources d'une
        catégorie sont dans cet état, la catégorie se met dans l'état "tout a
        été lu".</para>

        <para>Actions de l'écran :<itemizedlist>
            <listitem>
              <para>3.1 : selectionner_source</para>
            </listitem>

            <listitem>
              <para>3.4 : choisir_mode_visu_source</para>
            </listitem>

            <listitem>
              <para>3.6 : zoomer_source</para>
            </listitem>

            <listitem>
              <para>4.1 : marquer_item_non_lu</para>
            </listitem>

            <listitem>
              <para>4.2 : marquer_item_lu</para>
            </listitem>
          </itemizedlist></para>

        <para><mediaobject>
            <imageobject>
              <imagedata
              fileref="../ecrans/mode-view/view-source-plein-ecran_num.gif"></imagedata>
            </imageobject>
          </mediaobject></para>
      </section>

      <section>
        <title>Mode "edit" dégradé</title>

        <para>Voici les maquettes d'écrans du mode "View"
        (docs/specifications/ecrans/Ecrans_mode-edit-degrade.ppt) :</para>

        <para><mediaobject>
            <imageobject>
              <imagedata
              fileref="../ecrans/mode-edit-degrade/edit-degrade_num.gif"></imagedata>
            </imageobject>
          </mediaobject></para>
      </section>
    </section>

    <section>
      <title>Format des fichiers</title>

      <para>Référez vous aux DTD des fichiers XML :<itemizedlist>
          <listitem>
            <para>Fichier de configuration du canal : esup-lecture.dtd.</para>
          </listitem>

          <listitem>
            <para>Fichier de mapping DTD-xslt-xpath : mappings.dtd.</para>
          </listitem>

          <listitem>
            <para>Fichier &lt;category&gt; émis par un serveur distant
            contenant les profils des sources contenues dans une catégorie :
            category.dtd.</para>
          </listitem>
        </itemizedlist></para>

      <para>Concernant les groupes de visibilité, il existe deux moyens de
      définir leur contenus : l'expression d'une règle définissant le contenu
      et l'énumération de groupes du portails.</para>

      <para>Voici un exemple de définition du groupe de visibilité "obliged".
      Il contient toutes les personnes du groupe "toto" ainsi que tous les
      gens dont l'attribut portail (venant de LDAP) "departmentnumber" vaut
      957 :<programlisting>&lt;obliged&gt;
  &lt;regular attribute="departmentnumber" value="957" /&gt;
  &lt;group name="toto" /&gt;
&lt;/obliged&gt;
  </programlisting></para>
    </section>

    <section>
      <title>Traitement des erreurs</title>

      <para>cf. diagrammes d'activité : chaque cas d'utilisation contient 4
      états définissant le niveau d'erreur à traiter :<itemizedlist>
          <listitem>
            <para><emphasis>Warning</emphasis> : problème mineur non
            bloquant</para>
          </listitem>

          <listitem>
            <para><emphasis>Récupération</emphasis> : problème bloquant avec
            demande d'info pour récupérer l'erreur et poursuivre le cas
            d'utilisation</para>
          </listitem>

          <listitem>
            <para><emphasis>Erreur</emphasis> : problème bloquant nécessitant
            l'abandon du cas d'utilisation en cours</para>
          </listitem>

          <listitem>
            <para><emphasis>Fatal</emphasis> : problème bloquant nécessitant
            l'arrêt du canal</para>
          </listitem>
        </itemizedlist></para>
    </section>

    <section>
      <title>Spécification des logs</title>

      <para>Voici les différents niveaux de logs :<itemizedlist>
          <listitem>
            <para><emphasis>Fatal</emphasis> : correspond au traitement
            d'erreur "fatal"</para>
          </listitem>

          <listitem>
            <para><emphasis>Error</emphasis> : correspond au traitement
            d'erreur "erreur"</para>
          </listitem>

          <listitem>
            <para><emphasis>Warning</emphasis> : correspond au traitement
            d'erreur "warning" et "récupération"</para>
          </listitem>

          <listitem>
            <para><emphasis>Info</emphasis> : contient toutes les actions
            utilisateurs avec leurs paramètres (champs de formulaires) et
            toutes les variables de session.</para>
          </listitem>

          <listitem>
            <para><emphasis>Debug</emphasis> : toutes les activités et plus
            (pour l'usage du développeur)</para>
          </listitem>
        </itemizedlist></para>
    </section>

    <section>
      <title>Description des contraintes</title>

      <para>Utilisation d'une portlet pour l'intégration au canal</para>

      <para>Utilisation de Spring</para>

      <para>Utilisation d'Hibernate</para>

      <para>Utilisation de Log4J</para>

      <para>Internationnalisation : i18n</para>

      <para>Framework de cache : Whirly Cache, EH Cache</para>

      <para>Utilisation de ESup-commons</para>
    </section>

    <section>
      <title>Infos supplémentaires</title>

      <para><itemizedlist>
          <listitem>
            <para>Désignation des items</para>

            <para>Utiliser un algorithme de hachage pour fabriquer des
            empruntes sur des items</para>
          </listitem>

          <listitem>
            <para>Déterminer le xslt et le xpath</para>

            <para>se baser sur : xmlns, DTD fourni par le XML</para>

            <para>S'ils ne sont pas fournis, faire choisir le type du XML à
            l'utilisateur (-&gt; modifier fichier de mapping et uses cases)
            parmis ceux proposés par le fichier de mapping</para>
          </listitem>

          <listitem>
            <para>Prévoir le cas de l'utilisateur anonyme</para>
          </listitem>
        </itemizedlist></para>

      <section>
        <title>Lexique Français/anglais</title>

        <para><itemizedlist>
            <listitem>
              <para>item, source, mode</para>
            </listitem>

            <listitem>
              <para>flux XML : XML stream</para>
            </listitem>

            <listitem>
              <para>profil : profile</para>
            </listitem>

            <listitem>
              <para>categorie : category</para>
            </listitem>

            <listitem>
              <para>contexte : context</para>
            </listitem>

            <listitem>
              <para>feuille xslt : style sheet ?</para>
            </listitem>

            <listitem>
              <para>mode de marquage : highlighting mode, mark mode ?</para>
            </listitem>

            <listitem>
              <para>catégorie personnelle : personal</para>
            </listitem>

            <listitem>
              <para>catégorie controlée : managed category</para>
            </listitem>

            <listitem>
              <para>accès : access</para>
            </listitem>

            <listitem>
              <para>ensemble de visibilité : set of visibility</para>
            </listitem>

            <listitem>
              <para>libre : allowed</para>
            </listitem>

            <listitem>
              <para>préabonné : auto subscribed</para>
            </listitem>

            <listitem>
              <para>forcé : obliged</para>
            </listitem>

            <listitem>
              <para>contenu individualisé : spécific user content</para>
            </listitem>

            <listitem>
              <para>source individuelle : single source</para>
            </listitem>

            <listitem>
              <para>profil de l'utilisateur : user profile</para>
            </listitem>

            <listitem>
              <para>plier : to wrap / to fold</para>
            </listitem>

            <listitem>
              <para>visualisation (affichage) : display</para>
            </listitem>

            <listitem>
              <para></para>
            </listitem>

            <listitem>
              <para></para>
            </listitem>

            <listitem>
              <para></para>
            </listitem>

            <listitem>
              <para></para>
            </listitem>

            <listitem>
              <para></para>
            </listitem>

            <listitem>
              <para></para>
            </listitem>

            <listitem>
              <para></para>
            </listitem>
          </itemizedlist></para>
      </section>
    </section>

    <section>
      <title>Jeu de tests fonctionnels</title>

      <para>Voici les scénarios de tests définis à partir des diagrammes
      d'activité et du cahier des charges (contenus dans le répertoire
      <emphasis>docs/specifications/tests-de-qualif</emphasis> )
      :<itemizedlist>
          <listitem>
            <para>rafraichir_config_canal-v1-tests.xls :
            act-rafraichir_config_canal-v1 (A :
            rafraichir_config_canal,charger_tous_contextes,
            charger_tous_profils_categories, forcer_timer_categorie)</para>
          </listitem>

          <listitem>
            <para>afficher_context-v1-tests.xls : act-afficher_context-v1(B :
            rafraichir_context, enregistrer_categorie, effacer_categorie, C :
            afficher_context, afficher_context_selectionne)</para>
          </listitem>

          <listitem>
            <para>rafraichir_categorie_controlee-v1-tests.xls :
            act-rafraichir_categorie_controlee-v1 (D:
            rafraichir_categorie_controlée, E : recuperer_pt_cas, F :
            enregistrer_source, effacer_source, forcer_time_source_globale,
            forcer_time_source_individuelle)</para>
          </listitem>

          <listitem>
            <para>afficher_categorie-v1-tests.xls :
            act-afficher_categorie-v1(G : afficher_categorie,
            afficher_catégorie_sélectionnée,
            afficher_catégorie_dépliée)</para>
          </listitem>

          <listitem>
            <para>afficher_source-v1-tests.xls : act-afficher_source-v1 (H :
            afficher_source, rafraichir_source, I :
            afficher_source_selectionnee, J : recherche_xslt_xpath)</para>
          </listitem>

          <listitem>
            <para>charger_element-v1-tests.xls : act-charger_element-v1 (K :
            charger_element, charger_categorie, charger_source)</para>
          </listitem>

          <listitem>
            <para>divers_actions-v1-tests.xls :
            act-divers_contexte/categorie/source-v1 (selectionner_contexte,
            modifier_vue_contexte, modifer_vue_categorie,
            modifier_vue_source)</para>
          </listitem>
        </itemizedlist></para>

      <para>Autres tests de qualifications complémentaires, à partir du cahier
      des charges : autres_fonctionnalités-v1-tests.xls</para>
    </section>
  </section>

  <section>
    <title>Conception / Développement</title>

    <para>La documentation de conception et développement est accessible dans
    le répertoire docs/ du projet.</para>
  </section>
</article>